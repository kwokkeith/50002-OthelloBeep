module control_unit (
//    input clk,
    input z,   
    input opcode[6],
    output pcsel[3], 
    output asel,
    output ra2sel,
    output bsel,
    output alufn[6],
    output wdsel[2], 
    output werf
  ) {
  
  const CU_ROM = { 
    b01110000000000010,
    b00000011000110110,
    b00000011000010110,
    b00000011000000110,
    b01110000000000010,
    b00000010101100110,
    b00000010111100110, 
    b00000010110000110,
    b01110000000000010,
    b00000011101110110,
    b00000011101010110,
    b00000011100110110,
    b01110000000000010,
    b01110000000000010,
    b00000010000010110,
    b00000010000000110,  
    b01110000000000010,
    b00000001000110110,
    b00000001000010110, 
    b00000001000000110,
    b01110000000000010,
    b00000000101100110,
    b00000000111100110,
    b00000000110000110, 
    b01110000000000010, 
    b00000001101110110,
    b00000001101010110,
    b00000001100110110,
    b01110000000000010, 
    b01110000000000010,
    b00000000000010110,
    b00000000000000110,
    b00001000110101010,
    b00001000110100010,
    b00001000110100010,
    b01110000000000010,
    b01001000110100010,
    b01110000000000010,
    b00000110000000001,
    b00000010000001010,
    b00000000000001110, // INP control logic
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010,
    b01110000000000010
  };
    

  always {
  
  
    // control signal basic output connections
    pcsel = CU_ROM[opcode][16:14]; 
    asel = CU_ROM[opcode][12]; 
    ra2sel = CU_ROM[opcode][11]; 
    bsel = CU_ROM[opcode][10]; 
    alufn = CU_ROM[opcode][9:4]; 
    wdsel = CU_ROM[opcode][3:2];  
    werf= CU_ROM[opcode][1];
    
    // PCSEL for BNE/BEQ
    if (opcode == b011101 && z == 1){ // BEQ, branch if z == 1
      pcsel = b001;
    }
    else if (opcode == b011110 && z == 0){ // BNE, branch if z != 1
      pcsel = b001;
    }    

  }
}
